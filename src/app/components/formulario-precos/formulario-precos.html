<div class="space-y-8">
  <!-- Título do Relatório -->
  <div class="bg-white rounded-xl shadow-xs border border-gray-100 p-7">
    <label class="block text-lg font-semibold text-gray-700 mb-3 tracking-wide">
      Título do Relatório
    </label>
    <input
      type="text"
      id="titulo-relatorio"
      [ngModel]="tituloRelatorio"
      (ngModelChange)="tituloRelatorio = $event; onTituloChange()"
      placeholder="Digite o título do relatório"
      class="w-full px-4 py-3 text-gray-700 placeholder:text-gray-400 border-0 border-b-2 border-gray-200 focus:border-blue-500 focus:ring-0 bg-transparent rounded-none transition-colors"
    />
  </div>

  <!-- Barra de Navegação por Categorias -->
  <nav
    class="bg-white rounded-xl shadow-xs border border-gray-100 p-4 sticky top-20 z-10"
    role="tablist"
  >
    <ul class="flex flex-wrap gap-2">
      @for (categoria of categoriasExibicao; track categoria) {
      <li role="presentation">
        <button
          #tabButton
          id="tab-{{ gerarIdCategoria(categoria) }}"
          role="tab"
          [attr.aria-selected]="categoriaSelecionada === categoria"
          [attr.aria-controls]="'panel-' + gerarIdCategoria(categoria)"
          (click)="selecionarCategoria(categoria)"
          class="px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
          [ngClass]="{
            'text-blue-600 border-b-2 border-blue-600': categoriaSelecionada === categoria,
            'text-gray-700 hover:text-blue-600': categoriaSelecionada !== categoria
          }"
        >
          {{ categoria }}
        </button>
      </li>
      }
    </ul>
  </nav>

  <!-- Produtos por Categoria Selecionada -->
  @if (categoriaSelecionada) {
  <div
    id="panel-{{ gerarIdCategoria(categoriaSelecionada) }}"
    role="tabpanel"
    [attr.aria-labelledby]="'tab-' + gerarIdCategoria(categoriaSelecionada)"
    class="bg-white rounded-xl shadow-xs border border-gray-100 p-7"
  >
    <h2 class="text-lg font-semibold text-gray-700 mb-5 tracking-wide">
      {{ categoriaSelecionada }}
    </h2>
    <div class="space-y-4">
      @if (produtosPorCategoria[categoriaSelecionada]) {
        @for (produto of produtosPorCategoria[categoriaSelecionada]; track
        produto.nome) {
        <div
          class="flex items-center justify-between p-4 rounded-lg border transition-colors duration-300"
          [ngClass]="{
            'bg-amber-50/50 border-amber-100': !precos[produto.nome],
            'bg-green-50/50 border-green-200': precos[produto.nome]
          }"
        >
          <label
            [for]="'preco-' + constantes.gerarIdProduto(produto.nome)"
            class="flex-1 text-base font-normal text-gray-700 pr-4 tracking-wide"
          >
            {{ produto.nome }}
          </label>
          <div class="flex items-center space-x-2">
            <span class="text-gray-500 text-base">R$</span>
            <input
              type="number"
              [id]="'preco-' + constantes.gerarIdProduto(produto.nome)"
              [ngModel]="precos[produto.nome]"
              (ngModelChange)="precos[produto.nome] = $event; onPrecoChange()"
              step="0.01"
              min="0"
              placeholder="0,00"
              class="w-24 sm:w-28 px-3 py-2 text-base text-gray-700 placeholder:text-gray-400 border border-gray-200 rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white"
            />
          </div>
        </div>
        } } @else {
        <p class="text-center text-gray-500 py-4">
          Nenhum produto encontrado para esta categoria.
        </p>
        }
    </div>
  </div>
  } @else {
  <div class="bg-white rounded-xl shadow-xs border border-gray-100 p-7">
    <p class="text-center text-gray-500 py-4">
      Selecione uma categoria para ver os produtos.
    </p>
  </div>
  }

</div>
